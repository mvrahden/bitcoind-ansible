---
# Bitcoin user management
bitcoind_user: bitcoin
bitcoind_group: bitcoin

# Implementation: "core" (Bitcoin Core) or "knots" (Bitcoin Knots)
bitcoind_implementation: core

# Bitcoin binary information
# Core default: 30.2  |  Knots example: 29.2.knots20251110
bitcoind_version: 30.2
# Auto-detected from ansible_architecture when empty.
# Override for cross-platform deploys (e.g. "aarch64-linux-gnu").
bitcoind_arch: ""

# Serve JSON-RPC
bitcoind_server: true

# Wallet (disabled by default — enable only if you need on-node wallet functionality)
bitcoind_disablewallet: true

# Transaction index (increases disk usage significantly)
bitcoind_txindex: true

# Listen for incoming peer connections
bitcoind_listen: true

# Whitelist localhost connections
bitcoind_whitelist: 127.0.0.1

# Bitcoin GPG public keys per implementation.
# Names must match the ones found in the respective guix.sigs repositories:
#   Core: https://github.com/bitcoin-core/guix.sigs
#   Knots: https://github.com/bitcoinknots/guix.sigs
bitcoind_pgp_builders_pub_key_core:
  - id: 71A3B16735405025D447E8F274810B012346C9A6
    name: laanwj
  - id: E777299FC265DD04793070EB944D35F9AC3DB76A
    name: fanquake

bitcoind_pgp_builders_pub_key_knots:
  - id: 1A3E761F19D2CC7785C5502EA291A2C45D0C504A
    name: luke-jr
  - id: 1D70CBE4B42239445617D33DD316C8140185B647
    name: shiny

# Data directory mount configuration.
# Set bitcoind_data_mount_device to have the role manage the fstab entry.
# Prefer /dev/disk/by-id/ paths over LABEL= to avoid superblock corruption issues.
# Example: /dev/disk/by-id/ata-Samsung_SSD_860_EVO_500GB_S3Y9NB0K901234-part1
bitcoind_data_mount_device: ""
bitcoind_data_mount_path: /data
bitcoind_data_mount_fstype: ext4
bitcoind_data_mount_opts: defaults,nofail

# Bitcoin node configuration
bitcoind_data_dir: /data/bitcoin
bitcoind_network: main
bitcoind_bind: 127.0.0.1

# Bitcoin RPC server auth data (required — no default for security).
# Generate with: python3 share/rpcauth/rpcauth.py <username>
# The output line "rpcauth=..." goes here (without the "rpcauth=" prefix).
bitcoind_rpc_auth: ""
bitcoind_rpc_bind: 127.0.0.1
bitcoind_rpc_port: 8332
bitcoind_rpc_allow_ips:
  - 127.0.0.1

# ZMQ pub/sub endpoints for raw blocks and transactions.
# Disabled by default — enable if you have ZMQ subscribers (e.g. Lightning, mempool).
bitcoind_enable_zmq: false
bitcoind_zmq_host: 127.0.0.1
bitcoind_zmq_port_rawblock: 28332
bitcoind_zmq_port_rawtx: 28333
bitcoind_zmq_port_hashblock: 28332

# SOCKS5 proxy (e.g. Tor). Empty string disables.
bitcoind_proxy: ""

# Peer nodes to add via addnode=
bitcoind_nodes: []

# Restrict to onion network only (requires bitcoind_proxy pointing at Tor)
bitcoind_use_onion: false
